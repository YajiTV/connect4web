.hud {
    display: grid;
    grid-template-columns:1fr auto 1fr;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px
}

.controls .btn {
    width: fit-content;
    margin-inline: auto
}

.hud .player {
    display: flex;
    align-items: center;
    gap: 10px;
    justify-content: flex-start;
    min-width: 0
}

.hud .player.right {
    justify-content: flex-end
}

.player-badge {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    box-shadow: 0 0 0 3px rgba(255, 255, 255, .15), inset 0 0 0 1px rgba(10, 10, 13, .2)
}

.player-badge.p1 {
    background: var(--p1)
}

.player-badge.p2 {
    background: var(--p2)
}

.player-name {
    font-weight: 600;
    color: var(--panel-ink);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis
}

.turn-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    border-radius: 999px;
    background: rgba(99, 102, 241, .12);
    color: var(--panel-ink);
    font-weight: 700;
    letter-spacing: .02em;
    border: 1px solid var(--ring)
}

.turn-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%
}

.game-wrap {
    display: grid;
    gap: 18px
}

.board-shell {
    background: linear-gradient(180deg, rgba(255, 255, 255, .08), rgba(255, 255, 255, .02));
    border-radius: var(--radius);
    box-shadow: var(--shadow-2);
    padding: clamp(10px, 1.6vw, 14px)
}

.game-board {
    display: flex;
    gap: var(--gap);
    justify-content: center;
    margin: 0 auto;
    max-width: max-content;
    background: var(--board);
    padding: var(--pad);
    border-radius: calc(var(--radius) - 2px);
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, .06);
    position: relative;
    width: min(calc(7 * var(--cell) + 6 * var(--gap) + 2 * var(--pad)), 100%)
}

.column-wrapper {
    position: relative;
    width: var(--cell);
    display: flex;
    flex-direction: column;
    gap: var(--gap)
}

.column-btn {
    position: absolute;
    inset: 0;
    background: transparent;
    border: 0;
    cursor: pointer;
    z-index: 10;
    border-radius: var(--radius-sm);
    transition: background 160ms ease
}

.column-btn:focus-visible {
    outline: 3px solid var(--focus);
    outline-offset: 2px
}

.column-btn:disabled {
    cursor: not-allowed
}

.game-board.p1-turn .column-btn:not(:disabled):hover {
    background: rgba(231, 76, 60, .16)
}

.game-board.p2-turn .column-btn:not(:disabled):hover {
    background: rgba(52, 152, 219, .16)
}

.cell {
    width: var(--cell);
    height: var(--cell);
    border-radius: 50%;
    pointer-events: none;
    transition: transform 160ms ease, background 160ms ease, opacity 160ms ease, box-shadow 160ms ease;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, .18), 0 1px 2px rgba(10, 10, 13, .25)
}

.cell.empty {
    background: var(--empty);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, .6), 0 1px 2px rgba(10, 10, 13, .15)
}

.cell.p1 {
    background: radial-gradient(65% 65% at 30% 30%, var(--p1), var(--p1-strong))
}

.cell.p2 {
    background: radial-gradient(65% 65% at 30% 30%, var(--p2), var(--p2-strong))
}

.cell.ghost {
    position: absolute;
    left: 0;
    width: var(--cell);
    height: var(--cell);
    opacity: 0;
    pointer-events: none;
    filter: saturate(115%);
    transition: opacity 160ms ease, transform 200ms ease
}

.cell.ghost[data-row="0"] { top: calc(0 * (var(--cell) + var(--gap))) }
.cell.ghost[data-row="1"] { top: calc(1 * (var(--cell) + var(--gap))) }
.cell.ghost[data-row="2"] { top: calc(2 * (var(--cell) + var(--gap))) }
.cell.ghost[data-row="3"] { top: calc(3 * (var(--cell) + var(--gap))) }
.cell.ghost[data-row="4"] { top: calc(4 * (var(--cell) + var(--gap))) }
.cell.ghost[data-row="5"] { top: calc(5 * (var(--cell) + var(--gap))) }

.game-board.p1-turn .column-wrapper:hover .cell.ghost {
    background: radial-gradient(65% 65% at 30% 30%, var(--ghost-p1), rgba(192, 57, 43, .55));
    opacity: 1
}

.game-board.p2-turn .column-wrapper:hover .cell.ghost {
    background: radial-gradient(65% 65% at 30% 30%, var(--ghost-p2), rgba(41, 128, 185, .55));
    opacity: 1
}

.column-btn:disabled ~ .cell.ghost { opacity: 0 }

.cell.drop {
    position: relative;
    z-index: 2;
    animation-name: token-drop;
    animation-timing-function: cubic-bezier(.2, .7, .2, 1);
    animation-fill-mode: both
}

@keyframes token-drop {
    from { transform: translateY(calc((var(--row) + 1) * (var(--cell) + var(--gap)) * -1)) }
    to { transform: translateY(0) }
}

/* pending white disk during drop */
.cell.pending {
    position: absolute;
    left: 0;
    width: var(--cell);
    height: var(--cell);
    background: var(--empty);
    z-index: 1;
    animation-name: pending-hide;
    animation-timing-function: steps(1, end);
    animation-fill-mode: forwards
}

.cell.pending[data-row="0"] { top: calc(0 * (var(--cell) + var(--gap))) }
.cell.pending[data-row="1"] { top: calc(1 * (var(--cell) + var(--gap))) }
.cell.pending[data-row="2"] { top: calc(2 * (var(--cell) + var(--gap))) }
.cell.pending[data-row="3"] { top: calc(3 * (var(--cell) + var(--gap))) }
.cell.pending[data-row="4"] { top: calc(4 * (var(--cell) + var(--gap))) }
.cell.pending[data-row="5"] { top: calc(5 * (var(--cell) + var(--gap))) }

@keyframes pending-hide {
    from { opacity: 1 }
    to { opacity: 0 }
}
